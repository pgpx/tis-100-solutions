@0
S:MOV UP, ACC
  JNZ L
F:MOV 5, DOWN #CMD
L:MOV 3, DOWN
  MOV ACC, DOWN

@1
MOV 0, LEFT
MOV 0, LEFT

@2
MOV RIGHT, ACC
MOV ACC, RIGHT
MOV ACC, RIGHT

@3
S:MOV UP, ACC
  JNZ L
L:MOV ACC, LEFT
  MOV DOWN, ACC
  JNZ V
  MOV 0, DOWN
  MOV LEFT, DOWN
  MOV LEFT, NIL
  JMP S
V:SUB LEFT

@4
S:MOV 0, UP
L:MOV LEFT, ACC
  JEZ F
  JLZ N
  MOV ACC, UP
  JMP L
N:MOV 1, DOWN
NL:MOV UP, ACC
   MOV ACC, DOWN
   JNZ NL
   JMP S
F:MOV 5, DOWN

@5
S:MOV UP, ACC #V
  JEZ E
  MOV ACC, LEFT
L:SAV
  SUB DOWN
  JLZ N #NEWLOW
  ADD LEFT
  MOV ACC, RIGHT
  SWP
  JMP L
N:ADD LEFT
  MOV ACC, DOWN
  SWP
  MOV ACC, DOWN

@6
S:MOV UP, ACC#V
  JNZ V
Z:MOV 0, RIGHT
  MOV NIL, RIGHT
  JMP S
V:SAV
  SUB DOWN
  JGZ GREATER
L:NEG
  ADD UP
  MOV ACC, DOWN
  SWP
  MOV ACC, DOWN

@7
S:MOV 999, LEFT
L:JRO UP
N:MOV UP, ACC
  JEZ L
  MOV ACC, LEFT
  JMP N
F:MOV LEFT, ACC
  SUB
  MOV ACC, DOWN
  JNZ F

@8
S:MOV UP, ACC
  JNZ L
  MOV 0, RIGHT
  JMP W
L:SUB DOWN
  JLZ N #NEWLOW
  ADD LEFT
  MOV ACC, RIGHT
  MOV LEFT, ACC
  JMP L
N:ADD LEFT
  MOV ACC, DOWN
  MOV UP, DOWN
W:MOV -1,RIGHT
